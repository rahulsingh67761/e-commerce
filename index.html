<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MyShop | Home</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="index.css">
</head>
<body>

  <!-- Navbar with Search -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark position-relative">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">MyShop</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto align-items-center">
          <li class="nav-item"><a class="nav-link active" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="products.html">Products</a></li>
          <li class="nav-item">
            <a class="nav-link" href="cart.html">
              Cart <span class="badge bg-danger" id="cart-count">0</span>
            </a>
          </li>
          <li class="nav-item"><a class="nav-link" href="checkout.html">Checkout</a></li>
          <!-- Search Bar -->
          <li class="nav-item position-relative ms-3">
            <input class="form-control" type="search" placeholder="Search products..." id="searchBar" autocomplete="off">
            <div class="list-group position-absolute w-100" id="searchResults" style="z-index: 1000;"></div>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero bg-light text-center py-5">
    <div class="container">
      <h1 class="fw-bold mb-3">Welcome to MyShop üõçÔ∏è</h1>
      <p class="lead">Find the best deals on fashion, electronics, and more.</p>
      <a href="products.html" class="btn btn-primary mt-3">Shop Now</a>
    </div>
  </section>

  <!-- Featured Products -->
  <section class="featured-products py-5">
    <div class="container">
      <h2 class="text-center mb-4">Featured Products</h2>
      <div class="row">

        <!-- Product 1 -->
        <div class="col-md-4 mb-4">
          <div class="card h-100 shadow-sm">
            <img src="images/watch.jpg" class="card-img-top" alt="Watch">
            <div class="card-body text-center">
              <h5 class="card-title">Watch</h5>
              <p class="card-text">‚Çπ999</p>
              <button class="btn btn-success add-to-cart">Add to Cart</button>
            </div>
          </div>
        </div>

        <!-- Product 2 -->
        <div class="col-md-4 mb-4">
          <div class="card h-100 shadow-sm">
            <img src="images/bag.jpg" class="card-img-top" alt="Bag">
            <div class="card-body text-center">
              <h5 class="card-title">Bag</h5>
              <p class="card-text">‚Çπ1499</p>
              <button class="btn btn-success add-to-cart">Add to Cart</button>
            </div>
          </div>
        </div>

        <!-- Product 3 -->
        <div class="col-md-4 mb-4">
          <div class="card h-100 shadow-sm">
            <img src="images\smartphone.jpg" class="card-img-top" alt="Smartphone">
            <div class="card-body text-center">
              <h5 class="card-title">Smartphone</h5>
              <p class="card-text">‚Çπ24999</p>
              <button class="btn btn-success add-to-cart">Add to Cart</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-dark text-light text-center py-3">
    <p class="mb-0">&copy; 2025 MyShop. All rights reserved.</p>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Cart functionality
      const buttons = document.querySelectorAll(".add-to-cart");
      const cartBadge = document.getElementById("cart-count");

      function updateCartCount() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const total = cart.reduce((sum, item) => sum + item.quantity, 0);
        cartBadge.textContent = total;
      }

      buttons.forEach(btn => {
        btn.addEventListener("click", e => {
            const card = e.target.closest(".card");
            const name = card.querySelector(".card-title").textContent;
            const price = parseFloat(card.querySelector(".card-text").textContent.replace("‚Çπ", ""));
            const img = card.querySelector("img").getAttribute("src");

            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            const existing = cart.find(item => item.name === name);

            if (existing) {
                existing.quantity += 1;
            } else {
                cart.push({ name, price, img, quantity: 1 });
                }

                localStorage.setItem("cart", JSON.stringify(cart));
                updateCartCount();

                // Show "Added" feedback on button
                 const originalText = btn.textContent;
                 btn.textContent = "Added ‚úÖ";
                 btn.disabled = true;
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.disabled = false;
                    }, 3000); // 1 second delay
                    });
                    });

                    updateCartCount();


      // Search functionality
      const products = [
        { name: "Watch", price: 999, img: "images/watch.jpg" },
        { name: "Bag", price: 1499, img: "images/bag.jpg" },
        { name: "Smartphone", price: 24999, img: "images/smartphone.jpg" },
        { name: "Shoes", price: 1200, img: "images/shoes.jpg" },
        { name: "T-shirt", price: 499, img: "images/tshirt.jpg" },
        { name: "Laptop", price: 55000, img: "images/laptop.jpg" },
        { name: "Headphones", price: 1999, img: "images/headphones.jpg" },
        { name: "Sunglass", price: 799, img: "images/sunglass.jpg" }
      ];

      const searchBar = document.getElementById("searchBar");
      const results = document.getElementById("searchResults");

      searchBar.addEventListener("input", () => {
        const query = searchBar.value.toLowerCase();
        results.innerHTML = "";

        if (!query) return;

        const filtered = products.filter(p => p.name.toLowerCase().includes(query));

        filtered.forEach(p => {
          const item = document.createElement("button");
          item.type = "button";
          item.className = "list-group-item list-group-item-action";
          item.textContent = p.name;
          item.addEventListener("click", () => {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            const existing = cart.find(item => item.name === p.name);
            if (existing) {
              existing.quantity += 1;
            } else {
              cart.push({ name: p.name, price: p.price, img: p.img, quantity: 1 });
            }
            localStorage.setItem("cart", JSON.stringify(cart));



            const cartCount = document.getElementById("cart-count");
            const total = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = total;

            results.innerHTML = "";
            searchBar.value = "";
          });
          results.appendChild(item);
        });
      });

      document.addEventListener("click", e => {
        if (!searchBar.contains(e.target)) results.innerHTML = "";
      });
    });
  </script>

</body>
</html>
